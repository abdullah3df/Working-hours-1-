:root{--bg:#f6f8fb;--card:#fff;--ink:#0f172a;--muted:#475569;--line:#e2e8f0;--ok:#16a34a;--warn:#ef4444;--accent:#3b82f6;--shadow:0 12px 30px rgba(15,23,42,.08)}
.dark{--bg:#0b1020;--card:#0e1528;--ink:#e5e7eb;--muted:#94a3b8;--line:#1f2b40;--accent:#60a5fa;--shadow:0 18px 40px rgba(0,0,0,.4)}
*{box-sizing:border-box}
body{margin:0;background:
  radial-gradient(1200px 600px at 10% -10%,rgba(59,130,246,.08),transparent),
  radial-gradient(1000px 600px at 110% -20%,rgba(22,163,74,.08),transparent),
  var(--bg);color:var(--ink);font-family:system-ui,"Noto Naskh Arabic","Cairo",Tahoma,Arial,sans-serif}

/* Topbar */
.topbar{position:sticky;top:0;z-index:60;background:color-mix(in srgb, var(--card) 92%, transparent);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
.dark .topbar{background:#0c1426cc}
.topbar .inner{max-width:1080px;margin:0 auto;padding:10px 14px;display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;min-height:56px}
.brand{font-weight:900;display:flex;align-items:center;gap:8px;white-space:nowrap;letter-spacing:.3px}
.brand-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--line);border-radius:12px;background:var(--card);box-shadow:var(--shadow)}
.btn{height:38px;padding:6px 12px;border-radius:12px;border:1px solid var(--line);background:var(--card);color:var(--ink);cursor:pointer}
.user-pill{padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:var(--card);white-space:nowrap;max-width:32ch;overflow:hidden;text-overflow:ellipsis;box-shadow:var(--shadow)}

/* Drawer */
.menu-drawer{position:fixed; top:56px; bottom:0; left:0; width:320px;background:var(--card); border-inline-start:1px solid var(--line);box-shadow:var(--shadow); transform:translateX(-100%); transition:transform .25s ease; z-index:70;}
.menu-drawer.open{transform:translateX(0)}
[dir="rtl"] .menu-drawer{left:auto; right:0; transform:translateX(100%)}
[dir="rtl"] .menu-drawer.open{transform:translateX(0)}
.menu-scroller{height:100%; overflow:auto; padding:14px}
.menu-section{margin:8px 0 14px}
.menu-title{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin:0 0 8px}
.menu-row{display:flex;gap:8px;flex-wrap:wrap}
.menu-list{display:grid;gap:8px}
.hr{height:1px;background:var(--line);border:0;margin:12px 0}

/* Lang row */
.lang-chip{padding:8px 10px;border:1px solid var(--line);background:var(--card);border-radius:999px;cursor:pointer;font-weight:700}
.lang-chip[data-active="true"]{border-color:color-mix(in srgb, var(--accent) 40%, transparent);outline:2px solid color-mix(in srgb, var(--accent) 18%, transparent)}

/* Dark switch inside menu */
.switch{position:relative;display:inline-block;width:52px;height:28px}
.switch input{display:none}
.slider{position:absolute;inset:0;border-radius:999px;background:#cbd5e1;transition:.2s}
.slider::before{content:"üåô"; position:absolute; inset:2px auto auto 2px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:50%; transition:.2s; font-size:14px}
input:checked + .slider{background:#60a5fa}
input:checked + .slider::before{content:"‚òÄÔ∏è"; transform:translateX(24px)}

/* Layout */
.wrap{max-width:980px;margin:18px auto 48px;padding:12px}
.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:16px;box-shadow:var(--shadow)}
h1{margin:0 0 8px;font-size:22px}
p.small{color:var(--muted);margin:0 0 12px}

/* Inputs */
.date-row{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:end;margin-bottom:8px}
.date-input label{display:block;color:var(--muted);font-size:13px;margin:0 0 4px}
.input{width:100%;height:46px;padding:10px;border-radius:12px;border:1px solid var(--line);background:#fff;color:#0f172a;font-weight:700}
.dark .input{background:#0a1222;color:#e5e7eb;border-color:#1f2b40}
input[type="date"], input[type="time"]{direction:ltr;text-align:center}
.pill{align-self:end;padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#fff;color:#0f172a;font-size:13px;font-weight:700;text-align:center}
.dark .pill{background:#0a1222;color:#e5e7eb;border-color:#1f2b40}

/* Time grid */
.time-grid{display:grid;grid-template-columns:1fr 1fr 160px;gap:12px}
@media (max-width:600px){.time-grid{grid-template-columns:1fr 1fr}.break-col{grid-column:1 / -1}}
.time-box{border:1px solid var(--line);background:#fff;border-radius:16px;padding:12px}
.dark .time-box{background:#0e1528;border-color:#1f2b40}
.time-box .title{display:flex;align-items:center;gap:8px;font-size:13px;margin-bottom:6px}
.start .title{color:var(--ok)} .end .title{color:var(--warn)}
.time-box input{width:100%;height:46px;padding:10px;border-radius:12px;border:1px solid var(--line);background:#fff;color:#0f172a;font-weight:700}
.dark .time-box input{background:#0a1222;color:#e5e7eb;border-color:#1f2b40}
.start input{border-color:#86efac;background:#ecfdf5}
.end input{border-color:#fecaca;background:#fef2f2}
.dark .start input{border-color:#14532d;background:rgba(22,163,74,.08)}
.dark .end input{border-color:#7f1d1d;background:rgba(239,68,68,.08)}

/* KPIs */
.kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:12px;margin-top:10px}
.kcard{border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px;text-align:center}
.dark .kcard{background:#0a1222;border-color:#1f2b40;color:#e5e7eb}
.kcard h3{margin:0;color:var(--muted);font-size:13px}
.kcard .val{font-size:20px;font-weight:800;margin-top:4px}

/* Day annotations */
.annot-grid{display:grid;grid-template-columns:1fr 2fr;gap:12px;margin-top:12px}
@media (max-width:720px){.annot-grid{grid-template-columns:1fr}}
.form-field label{display:block;color:var(--muted);font-size:13px;margin:0 0 6px}
.select, .textarea{width:100%;border:1px solid var(--line);border-radius:12px;background:#fff;color:#0f172a;padding:10px}
.textarea{min-height:70px;resize:vertical}
.dark .select, .dark .textarea{background:#0a1222;color:#e5e7eb;border-color:#1f2b40}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px;z-index:80}
.modal.open{display:flex}
.dialog{background:var(--card);border:1px solid var(--line);border-radius:16px;max-width:920px;width:100%;padding:16px;max-height:85vh;overflow:auto;box-shadow:var(--shadow)}
.dialog h2{margin:0 0 10px;font-size:18px}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.table{width:100%;border-collapse:separate;border-spacing:0 8px}
thead th{font-size:12px;color:#334155}
th,td{padding:8px 10px;text-align:center}
tbody tr{background:#fff;border:1px solid var(--line)}
.dark tbody tr{background:#0a1222;border-color:#1f2b40}
tbody td:first-child, thead th:first-child{border-radius:10px 0 0 10px}
tbody td:last-child, thead th:last-child{border-radius:0 10px 10px 0}

/* Confirm Save Modal */
.confirm-dialog{max-width:520px}
.confirm-body{color:var(--muted);line-height:1.5}
.btn-primary{background:#3b82f6;color:#fff;border-color:#3b82f6}
.btn-danger{background:#f3f4f6;color:#0f172a}

/* Toast */
.toast{position: fixed; right:16px; top:16px; z-index:120;background: var(--card); color: var(--ink);border:1px solid var(--line); border-radius:12px; padding:10px 12px;box-shadow: var(--shadow); opacity:0; transform: translateY(-6px); pointer-events:none;transition: .25s ease;}
.toast.show{ opacity:1; transform: translateY(0) }

/* Animations + focus */
.card, .dialog, .menu-drawer{transition: box-shadow .25s ease, transform .25s ease, background .25s ease, border-color .25s ease;}
@media (prefers-reduced-motion: no-preference){
  .card{ animation: fadeUp .25s ease both; }
  .menu-drawer.open{ animation: slideIn .22s ease both; }
}
@keyframes fadeUp{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)} }
@keyframes slideIn{ from{transform:translateX(-100%)} to{transform:translateX(0)} }
[dir="rtl"] @keyframes slideIn{ from{transform:translateX(100%)} to{transform:translateX(0)} }

:focus-visible{outline: 2px solid color-mix(in srgb, var(--accent) 65%, white);outline-offset: 2px;border-radius: 12px;}

@media (max-width:720px){.topbar .inner{grid-template-columns:auto 1fr auto}.wrap{padding:10px}}
@media (max-width:420px){.btn{height:36px;padding:5px 10px}.wrap{margin-bottom:48px}}
